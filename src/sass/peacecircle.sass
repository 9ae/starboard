$avatar-height: 64px
$states-height: 28px
$reply-height: 80px
$nonconvoheight: 64px + $avatar-height + 20px + $states-height + $reply-height
$states-color: lighten($color2, 50%)

.peace-circle

  .states-wrapper
    margin-top: ($outer-spacing/-2)
    margin-bottom: $inner-spacing + 5px
    box-sizing: border-box
    background-color: $states-color
    height: $states-height

  ul.states
    list-style-type: none
    width: 100%
    margin-bottom: 0
    height: $states-height
    text-align: center

    li
      display: inline-block
      background-color: $states-color
      height: $states-height
      margin-left: 0
      margin-right: $states-height/2 - 3px
      position: relative
      box-sizing: border-box

      &:before
        content: ""
        background-color: $states-color
        width: $states-height/2 - 1px
        height: $states-height
        display: block
        position: absolute
        box-sizing: border-box
        top: 0
        left: ($states-height/-4) + 1px
        transform: skewX(30deg)
        border-left: solid 1px $color2

      &:after
        content: ""
        background-color: $states-color
        width: $states-height/2 - 1px
        height: $states-height
        display: block
        position: absolute
        box-sizing: border-box
        top: 0
        right: $states-height/-4
        transform: skewX(30deg)

      &:first-child
        &::before
          border-left: 0

      .state-title
        display: none
        padding: $states-height/4 $states-height/2
        color: $color2
        font-size: 0.8rem
        line-height: 0.8rem
        height: $states-height
        box-sizing: border-box
        text-transform: uppercase
      .state-placeholder
        display: inline-block
        width: $states-height/2
        height: $states-height

      &.active
        background-color: $states-color
        .state-title
          display: inline-block
        .state-placeholder
          display: none

      &:last-child
        border-right: 0

  .states-line
    margin-top: ($states-height/-2) - 2px
    margin-bottom: 0
    height: 4px
    color: $states-color
    border-color: $states-color
    background-color: $states-color

  .people
    display: flex
    justify-content: space-around
    margin-top: $inner-spacing
    margin-bottom: $inner-spacing

    .person
      display: inline-block

      img
        width: auto
        height: $avatar-height

      p.name
        text-align: center
        color: $grey

      &.active
        img
          +glow($color-positive)

      .placeholder
        width: 64px
        height: auto
        display: block
        background-color: $dark-grey
        border-radius: 32px

  .convo
    width: 100%
    overflow-y: scroll
    height: calc(100% - #{$nonconvoheight})
    padding-bottom: $outer-spacing

    .line
      width: 100%
      margin-top: $inner-spacing
      margin-left: $box-padding
      margin-right: $box-padding
      margin-bottom: 0

      &:first-child
        margin-top: 0

      img
        display: inline-block
        width: 32px
        height: auto
        margin-right: $box-padding/2
        margin-bottom: 5px
        box-sizing: border-box
        z-index: 1

      .bubble
        display: inline-block
        color: $black
        background-color: $grey
        padding: $box-padding + ($card-border-radius*0.5)
        border-radius: $card-border-radius
        font-weight: 300
        font-size: 0.8rem
        line-height: 0.9rem
        width: calc(100% - 50px)
        box-sizing: border-box
        position: relative
        z-index: 0

        &:after
          content: ''
          position: absolute
          bottom: 0
          left: -1.5*$box-padding
          width: 0
          height: 0
          border: 10px solid transparent
          border-left: 0
          z-index: -1

      &:nth-child(odd)
        .bubble
          background-color: $color3
          &:after
            border-right-color: $color3

      &:nth-child(even)
        .bubble
          background-color: $color4

          &:after
            border-right-color: $color4

  .reply-box
    width: 100%
    height: $reply-height
    z-index: 100
    background-color: $white
    border-top: 1px solid $grey
    padding: $box-padding
    position: fixed
    bottom: 0
    left: 0

    textarea
      @extend .fill90
      border: 0
      background: transparent
      color: $color0
      z-index: 101

    .send-btn
      position: absolute
      bottom: $box-padding
      right: $box-padding
      z-index: 102
      i
        font-size: 32px
        color: $color1
